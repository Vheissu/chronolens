<section class="space-y-4">
  <mdui-card class="glass p-4 space-y-3">
    <div class="flex items-center justify-between gap-3 flex-wrap">
      <div class="flex items-center gap-2">
        <mdui-icon name="public"></mdui-icon>
        <h2 class="text-xl font-semibold">Community Gallery</h2>
      </div>
      <div class="text-xs opacity-70">${visibleItems.length} shown · ${items.length} loaded</div>
    </div>
    <div class="grid gap-2 md:grid-cols-3 items-end">
      <mdui-select label="Era" value.two-way="filterEra">
        <mdui-menu-item value="">All</mdui-menu-item>
        <mdui-menu-item value="1890">1890</mdui-menu-item>
        <mdui-menu-item value="1920">1920</mdui-menu-item>
        <mdui-menu-item value="1940">1940</mdui-menu-item>
        <mdui-menu-item value="1970">1970</mdui-menu-item>
        <mdui-menu-item value="1980">1980</mdui-menu-item>
        <mdui-menu-item value="1990">1990</mdui-menu-item>
        <mdui-menu-item value="2000">2000</mdui-menu-item>
        <mdui-menu-item value="2010">2010</mdui-menu-item>
        <mdui-menu-item value="2090">2090</mdui-menu-item>
      </mdui-select>
      <mdui-select label="Intensity" value.two-way="filterVariant">
        <mdui-menu-item value="">All</mdui-menu-item>
        <mdui-menu-item value="mild">Mild</mdui-menu-item>
        <mdui-menu-item value="balanced">Balanced</mdui-menu-item>
        <mdui-menu-item value="cinematic">Cinematic</mdui-menu-item>
      </mdui-select>
      <div class="flex gap-2 justify-end">
        <mdui-button variant="tonal" icon="filter_alt_off" click.trigger="clearFilters()">Clear</mdui-button>
        <mdui-button variant="text" icon="refresh" click.trigger="load(true)" disabled.bind="busy">Refresh</mdui-button>
      </div>
    </div>
  </mdui-card>

  <template if.bind="busy">
    <div class="flex items-center gap-2 text-sm opacity-70">
      <mdui-circular-progress indeterminate></mdui-circular-progress>
      Loading…
    </div>
  </template>
  <template if.bind="error">
    <mdui-card class="p-3 text-red-600 text-sm">${error}</mdui-card>
  </template>

  <div class="grid gap-4 md:grid-cols-3">
    <template repeat.for="g of visibleItems">
      <mdui-card class="glass p-3 space-y-2 hover:shadow-lg transition-shadow" href.bind="'/p/' + g.publicId" clickable="true">
        <template if.bind="g.coverUrl">
          <img class="rounded-md w-full ring-1 ring-black/5" src.bind="g.coverUrl" alt="Published scene" loading="lazy" decoding="async" error.trigger="fallbackCover(g)"/>
        </template>
        <div class="text-sm font-semibold">Public ID: ${g.publicId}</div>
        <div class="text-xs opacity-70" if.bind="g.createdAt">${g.createdAt.toLocaleString?.() || ''}</div>
      </mdui-card>
    </template>
  </div>

  <template if.bind="!busy && !visibleItems.length && items.length">
    <mdui-card class="glass p-4 text-sm opacity-70">No items match the selected filters.</mdui-card>
  </template>

  <template if.bind="!busy && !items.length">
    <mdui-card class="glass p-4 text-sm opacity-70">No public scenes yet. Be the first to publish from a generated scene.</mdui-card>
  </template>

  <div class="flex justify-center">
    <mdui-button variant="tonal" icon="expand_more" click.trigger="loadMore()" disabled.bind="busy || !hasMore">Load more</mdui-button>
  </div>
</section>
