<div class="relative min-h-screen bg-[var(--mdui-color-surface)] app-grid">
  <div class="app-decor"></div>
  <mdui-top-app-bar class="sticky top-0 z-30">
    <mdui-button-icon href="/" icon="home" title="Home"></mdui-button-icon>
    <mdui-top-app-bar-title>Chronolens</mdui-top-app-bar-title>

    <div class="ml-4 hidden md:flex gap-1">
      <mdui-button href="/home" variant="text">Home</mdui-button>
      <mdui-button href="/generate" variant="text">Generate</mdui-button>
      <mdui-button href="/gallery" variant="text">Gallery</mdui-button>
      <template if.bind="auth.isLoggedIn && !auth.isAnonymous">
        <mdui-button href="/scenes" variant="text">Scenes</mdui-button>
      </template>
      <mdui-button href="/about" variant="text">About</mdui-button>
    </div>

    <div class="mdui-top-app-bar-spacer"></div>

    <mdui-button-icon icon="dark_mode" title="Toggle theme" click.trigger="toggleTheme()"></mdui-button-icon>

    <template if.bind="!auth.isLoggedIn">
      <mdui-button variant="filled" icon="login" class="ml-1" click.trigger="auth.signInWithGoogle()">Sign in (25/day)</mdui-button>
    </template>
    <template if.bind="auth.isLoggedIn">
      <mdui-dropdown>
        <mdui-button slot="trigger" variant="tonal" icon="account_circle">Account</mdui-button>
        <mdui-menu>
          <mdui-menu-item href="/generate" icon="dashboard">Generate</mdui-menu-item>
          <template if.bind="!auth.isAnonymous">
            <mdui-menu-item href="/scenes" icon="collections">Scenes</mdui-menu-item>
          </template>
          <mdui-divider></mdui-divider>
          <mdui-menu-item icon="logout" click.trigger="auth.signOut()">Sign out</mdui-menu-item>
        </mdui-menu>
      </mdui-dropdown>
    </template>
  </mdui-top-app-bar>

  <main class="relative mx-auto max-w-7xl px-4 py-6 space-y-5">
    <mdui-card class="glass p-6 overflow-hidden">
      <div class="flex flex-col md:flex-row md:items-center gap-4">
        <div class="shrink-0 w-12 h-12 rounded-xl flex items-center justify-center text-white"
             style="background: linear-gradient(135deg, rgb(var(--brand-1)), rgb(var(--brand-2)));">
          <mdui-icon name="camera" class="opacity-95"></mdui-icon>
        </div>
        <div class="flex-1">
          <div class="font-semibold text-lg">Welcome to Chronolens</div>
          <div class="text-sm opacity-75">Transform photos into different eras with vivid, film‑inspired styles.</div>
        </div>
        <div class="flex gap-2">
          <mdui-button href="/generate" variant="filled" icon="bolt">Start Generating</mdui-button>
          <mdui-button href="/about" variant="tonal" icon="info">About</mdui-button>
        </div>
      </div>
    </mdui-card>

    <au-viewport class="min-h-[calc(100vh-12rem)] block"></au-viewport>
  </main>

  <footer class="mt-10 py-6 text-center text-sm opacity-70">
    © ${new Date().getFullYear()} Chronolens
  </footer>
</div>
